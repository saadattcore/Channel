{
  "transformationId": "5F68E8D731BD49A3A20A1F4937309712",
  "sourceContractId": "C1CC5EDBAA2548D89B10EA90366463C6",
  "sourceContractVersion": 1,
  "destinationContractId": "0935B06ADD8E4E37AA9AAA201E87609F",
  "destinationContractVersion": 1,
  "typeId": "2F6A6D5464374B0486D6AE8ED423C18F",
  "name": "Establishment form transformation",
  "version": 1,
  "xslt": "<?xml version=\"1.0\"?>\n<xsl:stylesheet xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" xmlns:msxsl=\"urn:schemas-microsoft-com:xslt\" xmlns:js=\"urn:js\" version=\"1.0\" exclude-result-prefixes=\"msxsl js\">\n<xsl:output method=\"xml\" encoding=\"utf-8\"/>\n<msxsl:script language=\"JavaScript\" implements-prefix=\"js\">\n    <![CDATA[ \tfunction pad(number) { if (number < 10) { return '0' + number; } return number; } function getDate(){ \tvar date = new Date(); return date.getUTCFullYear() +\t'-' + pad(date.getUTCMonth() + 1) +\t'-' + pad(date.getUTCDate()) +\t'T' + pad(date.getUTCHours()) +\t':' + pad(date.getUTCMinutes()) +\t':' + pad(date.getUTCSeconds()); \t} ]]>\n</msxsl:script>\n<xsl:template match=\"/root\">\n<registerEstablishmentApplication xmlns=\"http://service.api.service.establishment.v2015.emaratech.com/1.0\">\n<registerEstablishmentApplicationRequest xmlns=\"\">\n    <xsl:attribute name=\"applicationPriority\">\n        <xsl:value-of select=\"applicationPriority\"/>\n    </xsl:attribute>\n    <xsl:attribute name=\"ApplicationNo\">\n        <xsl:value-of select=\"ApplicationNo\"/>\n    </xsl:attribute>\n    <xsl:element name=\"operatedBy\">\n        <xsl:value-of select=\"/root/OperatedBy\"/>\n    </xsl:element>\n    <xsl:element name=\"operationDate\">\n        <xsl:if test=\"/root/OperationDate\">\n        <xsl:value-of select=\"/root/OperationDate\"/>\n    </xsl:if>\n    <xsl:if test=\"/root/OperationDate = ''\">\n    <xsl:value-of select=\"js:getDate()\"/>\n</xsl:if>\n<xsl:if test=\"not(/root/OperationDate)\">\n<xsl:value-of select=\"js:getDate()\"/>\n</xsl:if>\n</xsl:element>\n<xsl:element name=\"source\">\n    <xsl:element name=\"id\">\n        <xsl:value-of select=\"/root/Id\"/>\n    </xsl:element>\n</xsl:element>\n<EstablishmentProfileDetail>\n    <xsl:attribute name=\"nameEnglish\">\n        <xsl:value-of select=\"/root/EstablishmentDetails/EstablishmentNameEn\"/>\n    </xsl:attribute>\n    <xsl:attribute name=\"nameArabic\">\n        <xsl:value-of select=\"/root/EstablishmentDetails/EstablishmentNameAr\"/>\n    </xsl:attribute>\n    <xsl:attribute name=\"registrationExpiryYears\">\n        <xsl:value-of select=\"/root/EstablishmentDetails/ExpiryYears\"/>\n    </xsl:attribute>\n    <establishmentAddressDetail>\n        <xsl:attribute name=\"areaId\">\n            <xsl:value-of select=\"/root/EstablishmentDetails/Area\"/>\n        </xsl:attribute>\n        <xsl:attribute name=\"cityId\">\n            <xsl:value-of select=\"/root/EstablishmentDetails/City\"/>\n        </xsl:attribute>\n        <xsl:attribute name=\"emirateId\">\n            <xsl:value-of select=\"/root/EstablishmentDetails/Emirate\"/>\n        </xsl:attribute>\n        <xsl:attribute name=\"emiratesDepartmentId\">\n            <xsl:value-of select=\"/root/EstablishmentDetails/EmiratesDepartment\"/>\n        </xsl:attribute>\n        <xsl:attribute name=\"poBoxEmirateId\">\n            <xsl:if test=\"/root/EstablishmentDetails/EmiratesDepartment\">\n            <xsl:value-of select=\"/root/EstablishmentDetails/EmiratesDepartment\"/>\n        </xsl:if>\n        <xsl:if test=\"not(/root/EstablishmentDetails/EmiratesDepartment)\">\n        <xsl:text>0</xsl:text>\n    </xsl:if>\n</xsl:attribute>\n<xsl:attribute name=\"poBoxNo\">\n    <xsl:value-of select=\"/root/EstablishmentDetails/POBox\"/>\n</xsl:attribute>\n<xsl:attribute name=\"flatNo\"/>\n<xsl:attribute name=\"faxNo\">\n    <xsl:value-of select=\"/root/EstablishmentDetails/FaxNumber\"/>\n</xsl:attribute>\n<xsl:attribute name=\"street\">\n    <xsl:value-of select=\"/root/EstablishmentDetails/StreetName\"/>\n</xsl:attribute>\n<xsl:attribute name=\"email\">\n    <xsl:value-of select=\"/root/EstablishmentDetails/Email\"/>\n</xsl:attribute>\n<xsl:attribute name=\"mobileNo\">\n    <xsl:value-of select=\"/root/EstablishmentDetails/MobileNumber\"/>\n</xsl:attribute>\n<xsl:attribute name=\"officeNo\">\n    <xsl:value-of select=\"/root/EstablishmentDetails/OfficeNumber\"/>\n</xsl:attribute>\n<xsl:attribute name=\"telephoneNo\">\n    <xsl:value-of select=\"/root/EstablishmentDetails/PhoneNumber\"/>\n</xsl:attribute>\n<xsl:attribute name=\"building\">\n    <xsl:value-of select=\"/root/EstablishmentDetails/BuildingName\"/>\n</xsl:attribute>\n</establishmentAddressDetail>\n</EstablishmentProfileDetail>\n<EstablishmentLicenseDetail>\n    <xsl:attribute name=\"licenseTypeId\">\n        <xsl:value-of select=\"/root/License/LicenseType\"/>\n    </xsl:attribute>\n    <xsl:attribute name=\"licenseAuthorityId\">\n        <xsl:if test=\"/root/License/licenseAuthorityId\">\n        <xsl:value-of select=\"/root/License/licenseAuthorityId\"/>\n    </xsl:if>\n    <xsl:if test=\"not(/root/License/licenseAuthorityId)\">\n    <xsl:text>0</xsl:text>\n</xsl:if>\n</xsl:attribute>\n<xsl:attribute name=\"licenseNumber\">\n    <xsl:value-of select=\"/root/License/LicenseNumber\"/>\n</xsl:attribute>\n<xsl:attribute name=\"licenseIssueDate\">\n    <xsl:value-of select=\"/root/License/TradeLicenseIssueDate\"/>\n</xsl:attribute>\n<xsl:attribute name=\"licenseExpiryDate\">\n    <xsl:value-of select=\"/root/License/TradeLicenseExpiryDate\"/>\n</xsl:attribute>\n<xsl:for-each select=\"/root/License/SelectedLicenseActivities\">\n<xsl:element name=\"LicenseActivity\">\n    <xsl:value-of select=\"current()\"/>\n</xsl:element>\n</xsl:for-each>\n</EstablishmentLicenseDetail>\n<EstablishmentMemberDetail>\n    <xsl:attribute name=\"memberTypeId\">\n        <xsl:value-of select=\"/root/Members/memberTypeId\"/>\n    </xsl:attribute>\n    <xsl:attribute name=\"establishmentCode\">\n        <xsl:value-of select=\"/root/Members/establishmentCode\"/>\n    </xsl:attribute>\n    <xsl:attribute name=\"UDB\">\n        <xsl:value-of select=\"/root/Members/indProfileId\"/>\n    </xsl:attribute>\n    <xsl:attribute name=\"signatory\">\n        <xsl:value-of select=\"/root/Members/signatory\"/>\n    </xsl:attribute>\n</EstablishmentMemberDetail>\n<PaymentDetail>\n    <xsl:attribute name=\"paymentReferenceNo\">\n        <xsl:value-of select=\"/root/PaymentDetail/PaymentReferenceNo\"/>\n    </xsl:attribute>\n    <xsl:attribute name=\"paymentDate\">\n        <xsl:value-of select=\"/root/PaymentDetail/PaymentDate\"/>\n    </xsl:attribute>\n    <Payment>\n        <xsl:attribute name=\"feeTypeId\">\n            <xsl:value-of select=\"/root/PaymentDetail/Payment/FeeTypeId\"/>\n        </xsl:attribute>\n        <xsl:attribute name=\"payableAmount\">\n            <xsl:value-of select=\"/root/PaymentDetail/Payment/PayableAmount\"/>\n        </xsl:attribute>\n        <xsl:attribute name=\"paidAmount\">\n            <xsl:value-of select=\"/root/PaymentDetail/Payment/PaidAmount\"/>\n        </xsl:attribute>\n        <xsl:attribute name=\"units\">\n            <xsl:value-of select=\"/root/PaymentDetail/Payment/Units\"/>\n        </xsl:attribute>\n        <xsl:attribute name=\"paymentExemptionReasonId\">\n            <xsl:value-of select=\"/root/PaymentDetail/Payment/PaymentExemptionReasonId\"/>\n        </xsl:attribute>\n        <xsl:attribute name=\"comment\">\n            <xsl:value-of select=\"/root/PaymentDetail/Payment/Comment\"/>\n        </xsl:attribute>\n    </Payment>\n</PaymentDetail>\n</registerEstablishmentApplicationRequest>\n</registerEstablishmentApplication>\n</xsl:template>\n</xsl:stylesheet>"
}